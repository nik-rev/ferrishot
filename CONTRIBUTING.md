# Contributing

**How it works**: `ferrishot` takes a screenshot of the focused monitor and creates a fullscreen window with background set to the taken screenshot.

Some pointers:

- `ui/` defines components that are part of the app. For example the `welcome_message` shows tips when there is no selection
- `ui/app.rs` holds the `App` struct which contains all information about the program
  - `App::view` renders the app
- `message.rs` holds `Message` enum which defines all events that can happen which mutate the `App`'s state
  - `App::update` responds to a `Message` to mutate itself
- `config/options.rs` defines each config option
- `cli.rs` defines the command line interface

100% of the code is documented. To take advantage of that you can use `cargo doc --document-private-items --open`.

## Building

On Windows and MacOS there are no dependencies.

On Linux, you will need these (`apt` package manager names):

- `libgl-dev`
- `libx11-dev`
- `libxcbcommon-dev`

If you use wayland you will also need `libwayland-dev` lib.

For nix users, there is a `flake.nix` which you can use with `nix develop`.

To run:

```sh
cargo run
```

### Documentation Generation

The files in `completions/` are all generated by the following command:

```sh
cargo docgen
```

## Debugging

- Use `F12` (or `ferrishot --debug`) to toggle the debug overlay which contains shows information about recent `Message`s received.
- The `.explain()` method on `Element` provided by the `Explainer` trait will show a red border around an element and all of its children.

## Logging

- The default log level is `error`. You can set a different log level using `--log-level=<level>` or by specifying the `RUST_LOG=<level>` env variable.
  - Levels: `error`, `warn`, `info`, `debug`, `trace`, `off`.
- The logs get written into a file. You can see which file by using `ferrishot --print-log-file-path`. You can also choose a custom file with `ferrishot --log-file`.
- To write the logs to standard output use the `--log-stdout` argument.

## Website

- `index.html` is the landing page and served at `ferrishot.com`. You can just open this file in the browser.
